
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.Node;
import org.jsoup.select.Elements;
import org.jsoup.select.NodeTraversor;
import org.jsoup.select.NodeVisitor;


public class HTMLUtils 
{
  public final static void main(String[] args) throws IOException// throws Exception
  {
	  File input = new File("src/htmls/f13.html");
	  System.out.println(input.exists());
	  Document doc = Jsoup.parse(input, "windows-1255", "");
	  PrintWriter writer = new PrintWriter("file.txt", "UTF-8");
		  String str = cleaning(doc.body());
   System.out.println(doc.body());
	  writer.println(str);
	  writer.close();
	  //System.out.println(doc.text());
  }
  private static String cleaning(Element element)
  {

	 String masecet = element.getElementsByTag("h2").first().text();
	 masecet = masecet.replaceAll("מסכת ", "");
	 masecet = masecet.replaceAll("פרק ", "");
	 masecet = masecet.substring(0, masecet.length()-2);
	 //element.getElementsByTag("h2").remove();
	 Elements h2s = element.getElementsByTag("h2");
	 String koteret;
	 for (Element h2:h2s)
	 {
		 koteret = "#####תוספתא/"+h2.text();
		 koteret = koteret.replaceAll("מסכת ", "");
		 koteret = koteret.replaceAll("פרק ", "");
		 //koteret = koteret.substring(0,koteret.length()-1);
		 koteret = koteret.replace(' ', '/');
		 h2.text(koteret);
	 }
			 
//	 
//	  Elements bs= element.getElementsByTag("b");
//	  for (Element b:bs)
//	  {
//		  b.text("##### תוספתא/"+seder+"/"+masecet+"/"+b.text().replace(',', '/')+"");
//	  }
//	  element.getElementsByTag("p").first().remove();
//	  element.getElementsByTag("p").first().remove();
//	  element.getElementsByTag("p").first().remove();
//
	  String str = element.getElementsByTag("div").first().html().toString();
//	  str = str.replaceAll("</b>&nbsp; ", "\n");
//	  str = str.replaceAll("</p> ", "\nסוףקובץ\n");
//	  str = str.replaceAll("<p><b>", "");
//	  str = str.replaceAll("&nbsp", ""); 
//	  str = str.replaceAll("&lt;", ""); //
//	  
//	  
//	  
//	  str = str.replaceAll("&gt;", ""); 
//	  str = str.replaceAll(";", ""); 
//	  str = str.replaceAll("<br>", ""); 
//	  str = str.replaceAll("\\(.*?\\)","");
//	  str = str.replaceAll("\\[.*?\\]",""); 
//	  str = str.replaceAll("  ", " "); 
//	  str = "#####תקציר \n הוספת התוספתא על ידי בוט\nסוףקובץ\n"+str;
//	  
//	  str = str.replaceAll("\n ", "\n");
//	  str = str.replaceAll("# ", "#");
//	  
//	  
//	  
	  
	  return str;
	  
  
  }
}

